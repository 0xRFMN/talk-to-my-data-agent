const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./react-plotly-C23_EJOx.js","./index-BzfJdIVJ.js","./index-CoQrQi5d.css","./ResponseMessage-3bTSIUqn.js","./tabs-DSRUjyLL.js","./loading-Ncjk_bb8.js"])))=>i.map(i=>d[i]);
import{j as a,F as x,p as Q,q as ee,r as d,s as M,t as ae,v as Ce,P as j,w as te,x as we,y as Pe,z as ye,A as D,R as h,k as b,C as S,E as ne,B as y,_ as se,G as Ne,H as Le,J as _e,K as Me,L as De,M as Se,N as Re,O as Te,T as ke,I as Ie,U as Ve,V as re,W as Ee,X as Ae,Y as Ge,Z as Fe,$ as oe,a0 as Oe,a1 as q,a2 as ze,a3 as He,S as Ze}from"./index-BzfJdIVJ.js";import{f as ie,L as qe,S as Ue}from"./loading-Ncjk_bb8.js";var T={},U;function Be(){return U||(U=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n="far",t="comment",r=512,s=512,o=[128489,61669],l="f075",i="M123.6 391.3c12.9-9.4 29.6-11.8 44.6-6.4c26.5 9.6 56.2 15.1 87.8 15.1c124.7 0 208-80.5 208-160s-83.3-160-208-160S48 160.5 48 240c0 32 12.4 62.8 35.7 89.2c8.6 9.7 12.8 22.5 11.8 35.5c-1.4 18.1-5.7 34.7-11.3 49.4c17-7.9 31.1-16.7 39.4-22.7zM21.2 431.9c1.8-2.7 3.5-5.4 5.1-8.1c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208s-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6c-15.1 6.6-32.3 12.6-50.1 16.1c-.8 .2-1.6 .3-2.4 .5c-4.4 .8-8.7 1.5-13.2 1.9c-.2 0-.5 .1-.7 .1c-5.1 .5-10.2 .8-15.3 .8c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c4.1-4.2 7.8-8.7 11.3-13.5c1.7-2.3 3.3-4.6 4.8-6.9l.3-.5z";e.definition={prefix:n,iconName:t,icon:[r,s,o,l,i]},e.faComment=e.definition,e.prefix=n,e.iconName=t,e.width=r,e.height=s,e.ligatures=o,e.unicode=l,e.svgPathData=i,e.aliases=o}(T)),T}var $e=Be();const Ke="data:image/svg+xml,%3csvg%20width='25'%20height='24'%20viewBox='0%200%2025%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3crect%20x='0.682129'%20width='24'%20height='24'%20rx='12'%20fill='%2373FF95'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M5.93506%205.49414H12.6824V6.93975H5.93506V5.49414ZM16.052%206.93994H12.6783V8.38555H16.052V6.93994ZM5.93506%208.38573H12.6824V9.83134H5.93506V8.38573ZM19.4293%209.83294H16.0556V11.2773H5.93506V12.7229H16.056V11.2786H19.4293V9.83294ZM19.4293%2012.7231H16.0556V14.1687H19.4293V12.7231ZM5.93506%2014.1689H12.6824V15.6145H5.93506V14.1689ZM16.052%2015.6147H12.6783V17.0603H16.052V15.6147ZM12.6824%2017.0605H5.93506V18.5061H12.6824V17.0605Z'%20fill='%23181D21'%20/%3e%3c/svg%3e",Ia=()=>{const e=Q();return a.jsx("div",{className:"text-center text-sm font-normal leading-tight text-primary-foreground",children:a.jsx("img",{src:Ke,alt:"",className:"cursor-pointer",onClick:()=>e(ee.DATA)})})},Je=()=>a.jsx("div",{className:"w-6 h-6 p-2.5 bg-[#7c97f8] rounded-[100px] flex-col justify-center items-center gap-2.5 inline-flex overflow-hidden",children:a.jsx("div",{className:"text-center text-sm font-normal leading-tight text-primary-foreground",children:a.jsx(x,{icon:$e.faComment})})});var k={},B;function Ye(){return B||(B=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n="fas",t="chevron-up",r=512,s=512,o=[],l="f077",i="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z";e.definition={prefix:n,iconName:t,icon:[r,s,o,l,i]},e.faChevronUp=e.definition,e.prefix=n,e.iconName=t,e.width=r,e.height=s,e.ligatures=o,e.unicode=l,e.svgPathData=i,e.aliases=o}(k)),k}var We=Ye(),I={},$;function Xe(){return $||($=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n="fas",t="chevron-down",r=512,s=512,o=[],l="f078",i="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";e.definition={prefix:n,iconName:t,icon:[r,s,o,l,i]},e.faChevronDown=e.definition,e.prefix=n,e.iconName=t,e.width=r,e.height=s,e.ligatures=o,e.unicode=l,e.svgPathData=i,e.aliases=o}(I)),I}var Qe=Xe(),A="Collapsible",[ea,Va]=ae(A),[aa,G]=ea(A),le=d.forwardRef((e,n)=>{const{__scopeCollapsible:t,open:r,defaultOpen:s,disabled:o,onOpenChange:l,...i}=e,[c=!1,g]=M({prop:r,defaultProp:s,onChange:l});return a.jsx(aa,{scope:t,disabled:o,contentId:Ce(),open:c,onOpenToggle:d.useCallback(()=>g(f=>!f),[g]),children:a.jsx(j.div,{"data-state":O(c),"data-disabled":o?"":void 0,...i,ref:n})})});le.displayName=A;var ce="CollapsibleTrigger",de=d.forwardRef((e,n)=>{const{__scopeCollapsible:t,...r}=e,s=G(ce,t);return a.jsx(j.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":O(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:n,onClick:te(e.onClick,s.onOpenToggle)})});de.displayName=ce;var F="CollapsibleContent",ue=d.forwardRef((e,n)=>{const{forceMount:t,...r}=e,s=G(F,e.__scopeCollapsible);return a.jsx(we,{present:t||s.open,children:({present:o})=>a.jsx(ta,{...r,ref:n,present:o})})});ue.displayName=F;var ta=d.forwardRef((e,n)=>{const{__scopeCollapsible:t,present:r,children:s,...o}=e,l=G(F,t),[i,c]=d.useState(r),g=d.useRef(null),f=Pe(n,g),u=d.useRef(0),p=u.current,v=d.useRef(0),w=v.current,P=l.open||i,R=d.useRef(P),N=d.useRef(void 0);return d.useEffect(()=>{const m=requestAnimationFrame(()=>R.current=!1);return()=>cancelAnimationFrame(m)},[]),ye(()=>{const m=g.current;if(m){N.current=N.current||{transitionDuration:m.style.transitionDuration,animationName:m.style.animationName},m.style.transitionDuration="0s",m.style.animationName="none";const Z=m.getBoundingClientRect();u.current=Z.height,v.current=Z.width,R.current||(m.style.transitionDuration=N.current.transitionDuration,m.style.animationName=N.current.animationName),c(r)}},[l.open,r]),a.jsx(j.div,{"data-state":O(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!P,...o,ref:f,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...e.style},children:P&&s})});function O(e){return e?"open":"closed"}var na=le;function sa({...e}){return a.jsx(na,{"data-slot":"collapsible",...e})}function ra({...e}){return a.jsx(de,{"data-slot":"collapsible-trigger",...e})}function oa({...e}){return a.jsx(ue,{"data-slot":"collapsible-content",...e})}const ia=({header:e,children:n})=>{const{collapsiblePanelDefaultOpen:t}=D(),[r,s]=h.useState(t),o=d.useRef(null);return d.useEffect(()=>{var l;(l=o.current)==null||l.scrollIntoView(!1)}),a.jsxs(sa,{open:r,onOpenChange:s,className:"rounded border border-border",children:[a.jsx(ra,{asChild:!0,className:"bg-muted",children:a.jsxs("div",{className:"h-[52px] flex justify-between items-center px-4 cursor-pointer",children:[a.jsx("div",{children:e}),a.jsx(x,{icon:r?We.faChevronUp:Qe.faChevronDown})]})}),a.jsx(oa,{ref:o,className:"py-4 px-4 bg-muted",children:n})]})},z=d.forwardRef(({className:e,type:n,icon:t,onKeyDown:r,iconProps:{behavior:s,...o},...l},i)=>{const c=t,[g,f]=d.useState(!1),[u,p]=d.useState(!1);return a.jsxs("div",{className:b("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground aria-invalid:outline-destructive/60 aria-invalid:ring-destructive/20 dark:aria-invalid:outline-destructive dark:aria-invalid:ring-destructive/50 ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 aria-invalid:border-destructive/60 dark:aria-invalid:border-destructive h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium min-w-[600px] min-h-[57px] justify-start items-center inline-flex",g&&"ring-4 outline-1 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",e),children:[c&&s==="prepend"&&a.jsx("div",{className:b("w-4 h-4 mr-3 text-muted-foreground"),children:a.jsx(c,{...o})}),a.jsx("input",{type:n,className:b("flex items-center justify-center w-full bg-transparent placeholder:text-muted-foreground file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50",e),onCompositionStart:()=>p(!0),onCompositionEnd:()=>p(!1),onKeyDown:v=>{r&&!u&&r(v)},onFocus:()=>f(!0),onBlur:()=>f(!1),ref:i,...l}),c&&s==="append"&&a.jsx("div",{className:b("w-4 ml-3 text-muted-foreground h-9 flex-col justify-center items-center inline-flex cursor-pointer"),children:a.jsx(c,{...o})})]})});z.displayName="PromptInput";var V={},K;function la(){return K||(K=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n="fas",t="paper-plane",r=512,s=512,o=[61913],l="f1d8",i="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z";e.definition={prefix:n,iconName:t,icon:[r,s,o,l,i]},e.faPaperPlane=e.definition,e.prefix=n,e.iconName=t,e.width=r,e.height=s,e.ligatures=o,e.unicode=l,e.svgPathData=i,e.aliases=o}(V)),V}var fe=la();const ca="data:image/svg+xml,%3csvg%20width='200'%20height='200'%20viewBox='0%200%20200%20200'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%20136V128L100%2080L184%20128V136L100%20184L16%20136Z'%20fill='%231D2226'/%3e%3cpath%20d='M16%20128V136L100%20184M16%20128L100%20176M16%20128L100%2080L184%20128M184%20128V136L100%20184M184%20128L100%20176M100%20176V184'%20stroke='%233E454D'%20stroke-width='0.5'/%3e%3cpath%20d='M69.7677%2089.5558C65.1232%2092.2373%2061.358%2098.7587%2061.358%20104.122V139.898C61.358%20145.261%2065.1232%20147.434%2069.7677%20144.753L109.564%20121.776C113.697%20124.463%20122.887%20124.241%20130.551%20121.287C132.038%20120.714%20133.499%20120.047%20134.915%20119.306C129.545%20120.349%20125.042%20117.697%20124.384%20113.22L133.504%20107.955C138.148%20105.273%20141.914%2098.7519%20141.914%2093.3889V57.6129C141.914%2052.2499%20138.148%2050.0762%20133.504%2052.7576L69.7677%2089.5558Z'%20fill='%233E454D'%20stroke='%23111519'%20stroke-width='0.5'/%3e%3cpath%20d='M70.457%20101.309L70.457%2098.6077L132.034%2063.3482L132.034%2069.1356L70.457%20105.055L70.457%20101.309Z'%20fill='%232A3036'/%3e%3cpath%20d='M70.457%20111.572L70.457%20108.871L132.034%2073.611L132.034%2079.3984L70.457%20115.318L70.457%20111.572Z'%20fill='%232A3036'/%3e%3cpath%20d='M70.457%20121.835L70.457%20119.133L132.034%2083.8737L132.034%2089.6612L70.457%20125.581L70.457%20121.835Z'%20fill='%232A3036'/%3e%3cpath%20d='M70.457%20132.097L70.457%20129.396L118.564%20101.192L118.564%20106.979L70.457%20135.843L70.457%20132.097Z'%20fill='%232A3036'/%3e%3cpath%20d='M61.5408%20141.815C61.421%20141.232%2061.358%20140.591%2061.358%20139.898V104.122C61.358%2098.7587%2065.1232%2092.2374%2069.7677%2089.5558L133.504%2052.7577C135.147%2051.8088%20136.681%2051.4679%20137.976%2051.6612C134.9%2049.4301%20130.778%2049.6702%20128.363%2051.0645L65.4096%2087.3768C60.7651%2090.0583%2057%2096.5797%2057%20101.943V137.719C57%20140.4%2059.179%20144.217%2063.8893%20145.718C62.6782%20145.019%2061.8347%20143.683%2061.5408%20141.815Z'%20fill='%232A3036'%20stroke='%23111519'%20stroke-width='0.5'/%3e%3cpath%20d='M157%2057.0565L148.736%2058.2967L147.966%2056.3392L145.677%2050.5195L142.619%2061.828L142.139%2062.3104L134.355%2070.1306L140.483%2069.2109L142.619%2068.8904L145.677%2076.6677L148.662%2065.6322L148.736%2065.3592L157%2057.0565Z'%20fill='%2342C0FC'%20stroke='%231D2226'%20stroke-width='0.5'/%3e%3c/svg%3e",da=({chatId:e})=>{const{enableChartGeneration:n,enableBusinessInsights:t,dataSource:r}=D(),{data:s}=S(),{mutate:o}=ne(),[l,i]=d.useState(""),c=e?s==null?void 0:s.find(u=>u.id===e):void 0,g=(c==null?void 0:c.data_source)||r,f=()=>{l.trim()&&(o({message:l,chatId:e,enableChartGeneration:n,enableBusinessInsights:t,dataSource:g}),i(""))};return a.jsx("div",{className:"flex-1 flex flex-col p-4",children:a.jsx("div",{className:"flex flex-col flex-1 items-center justify-center",children:a.jsxs("div",{className:"w-[400px] flex flex-col flex-1 items-center justify-center",children:[a.jsx("img",{src:ca,alt:""}),a.jsx("h4",{className:"mb-2 mt-4",children:a.jsx("strong",{className:" text-center font-semibold",children:"Type a question about your dataset"})}),a.jsx("p",{className:"text-center mb-10",children:"Ask specific questions about your datasets to get insights, generate visualizations, and discover patterns. Include column names and the kind of analysis you're looking for to get more accurate results."}),a.jsx(z,{icon:x,iconProps:{icon:fe.faPaperPlane,behavior:"append",onClick:f},onChange:u=>i(u.target.value),onKeyDown:u=>{u.key==="Enter"&&f()},value:l,placeholder:"Ask another question about your datasets."})]})})})},Ea=h.memo(({children:e})=>{const n=d.useRef(null);return d.useEffect(()=>{var t;(t=n.current)==null||t.scrollIntoView(!1)}),a.jsx("div",{className:"p-3 bg-card rounded flex-col justify-start items-start gap-3 flex mb-2.5 mr-2",ref:n,children:e})}),ua=({avatar:e=Je,name:n,date:t,onDelete:r})=>a.jsxs("div",{className:"self-stretch justify-between items-center gap-1 inline-flex",children:[a.jsxs("div",{className:"grow shrink basis-0 h-6 justify-start items-center gap-2 flex",children:[e(),a.jsx("div",{className:"text-sm font-semibold leading-tight",children:n}),a.jsx("div",{className:"text-xs font-normal leading-[17px]",children:t})]}),r&&a.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:s=>{s.stopPropagation(),r()},title:"Delete message",children:a.jsx(x,{icon:ie.faTrash,className:"h-3.5 w-3.5"})})]}),fa=d.lazy(()=>se(()=>import("./react-plotly-C23_EJOx.js").then(e=>e.r),__vite__mapDeps([0,1,2]),import.meta.url)),ga=()=>a.jsx("div",{className:"flex items-center justify-center p-4 h-[200px]",children:a.jsx("div",{children:"Loading visualization..."})}),Aa=({plotData:e,className:n="",width:t="100%",height:r="500px"})=>{var s,o;return!e||!e.data||!e.layout?null:a.jsx(ia,{header:(o=(s=e.layout)==null?void 0:s.title)==null?void 0:o.text,children:a.jsx(d.Suspense,{fallback:a.jsx(ga,{}),children:a.jsx(fa,{data:e.data,layout:e.layout,className:n,style:{position:"relative",width:t,height:r},config:{responsive:!0}})})})},Ga=e=>{if(!e)return null;try{return{paper_bgcolor:"rgba(255,255,255, 0)",...JSON.parse(e)}}catch(n){return console.error("Failed to parse plot data:",n),null}},pa=e=>{if(!e)return"";try{return new Date(e).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}catch(n){return console.error("Error formatting date:",n),""}},ha=({id:e,date:n,timestamp:t,message:r,chatId:s,responseId:o})=>{const l=d.useRef(null),{mutate:i}=Ne();d.useEffect(()=>{var f;(f=l.current)==null||f.scrollIntoView(!1)});const c=t?pa(t):n||"",g=()=>{e&&i({messageId:e,chatId:s}),o&&i({messageId:o,chatId:s})};return a.jsxs("div",{className:"p-3 bg-card rounded flex-col justify-start items-start gap-3 flex mb-2.5 mr-2",ref:l,children:[a.jsx(ua,{name:"You",date:c,onDelete:g}),a.jsx("div",{className:"self-stretch text-sm font-normal leading-tight",children:r})]})},ma=({chatId:e,allowSend:n})=>{const{mutate:t}=ne(),{enableChartGeneration:r,enableBusinessInsights:s,dataSource:o}=D(),{data:l}=S(),[i,c]=d.useState(""),g=e?l==null?void 0:l.find(p=>p.id===e):void 0,f=(g==null?void 0:g.data_source)||o,u=()=>{i.trim()&&(t({message:i,chatId:e,enableChartGeneration:r,enableBusinessInsights:s,dataSource:f}),c(""))};return a.jsx(z,{icon:x,iconProps:{icon:fe.faPaperPlane,behavior:"append",onClick:u},placeholder:"Ask another question about your datasets.",onKeyDown:p=>{p.key==="Enter"&&n&&u()},onChange:p=>c(p.target.value),value:i})};var E={},J;function va(){return J||(J=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n="fas",t="pencil",r=512,s=512,o=[9999,61504,"pencil-alt"],l="f303",i="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z";e.definition={prefix:n,iconName:t,icon:[r,s,o,l,i]},e.faPencil=e.definition,e.prefix=n,e.iconName=t,e.width=r,e.height=s,e.ligatures=o,e.unicode=l,e.svgPathData=i,e.aliases=o}(E)),E}var xa=va();const ba=({chatId:e,currentName:n})=>{const[t,r]=d.useState(n),[s,o]=d.useState(!1),{mutate:l,isPending:i}=Le();return a.jsxs(_e,{defaultOpen:!1,open:s,onOpenChange:c=>{c&&r(n),o(c)},children:[a.jsx(Me,{asChild:!0,children:a.jsx(y,{variant:"link",className:"ml-2",children:a.jsx(x,{icon:xa.faPencil})})}),a.jsxs(De,{className:"sm:max-w-[500px]",children:[a.jsxs(Se,{children:[a.jsx(Re,{children:"Rename chat"}),a.jsx(Te,{children:"Enter a new name for this chat."})]}),a.jsx("div",{className:"grid gap-4 py-4",children:a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(ke,{htmlFor:"rename",className:"text-right",children:"Chat name"}),a.jsx(Ie,{id:"rename",value:t,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"Enter a new name for this chat",disabled:i,onKeyDown:c=>{c.key==="Enter"&&t.trim()&&t!==n&&l({chatId:e,name:t.trim()},{onSuccess:()=>{o(!1)}})}})]})}),a.jsxs(Ve,{children:[a.jsx(y,{variant:"ghost",onClick:()=>{r(n),o(!1)},children:"Cancel"}),a.jsx(y,{onClick:()=>{t.trim()&&t!==n&&l({chatId:e,name:t.trim()},{onSuccess:()=>{o(!1)}})},disabled:i||!t.trim()||t===n,children:i?"Renaming...":"Rename"})]})]})]})};var ja="Toggle",ge=d.forwardRef((e,n)=>{const{pressed:t,defaultPressed:r=!1,onPressedChange:s,...o}=e,[l=!1,i]=M({prop:t,onChange:s,defaultProp:r});return a.jsx(j.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:n,onClick:te(e.onClick,()=>{e.disabled||i(!l)})})});ge.displayName=ja;var C="ToggleGroup",[pe,Fa]=ae(C,[re]),he=re(),H=h.forwardRef((e,n)=>{const{type:t,...r}=e;if(t==="single"){const s=r;return a.jsx(Ca,{...s,ref:n})}if(t==="multiple"){const s=r;return a.jsx(wa,{...s,ref:n})}throw new Error(`Missing prop \`type\` expected on \`${C}\``)});H.displayName=C;var[me,ve]=pe(C),Ca=h.forwardRef((e,n)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...o}=e,[l,i]=M({prop:t,defaultProp:r,onChange:s});return a.jsx(me,{scope:e.__scopeToggleGroup,type:"single",value:l?[l]:[],onItemActivate:i,onItemDeactivate:h.useCallback(()=>i(""),[i]),children:a.jsx(xe,{...o,ref:n})})}),wa=h.forwardRef((e,n)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...o}=e,[l=[],i]=M({prop:t,defaultProp:r,onChange:s}),c=h.useCallback(f=>i((u=[])=>[...u,f]),[i]),g=h.useCallback(f=>i((u=[])=>u.filter(p=>p!==f)),[i]);return a.jsx(me,{scope:e.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:c,onItemDeactivate:g,children:a.jsx(xe,{...o,ref:n})})});H.displayName=C;var[Pa,ya]=pe(C),xe=h.forwardRef((e,n)=>{const{__scopeToggleGroup:t,disabled:r=!1,rovingFocus:s=!0,orientation:o,dir:l,loop:i=!0,...c}=e,g=he(t),f=Ae(l),u={role:"group",dir:f,...c};return a.jsx(Pa,{scope:t,rovingFocus:s,disabled:r,children:s?a.jsx(Ge,{asChild:!0,...g,orientation:o,dir:f,loop:i,children:a.jsx(j.div,{...u,ref:n})}):a.jsx(j.div,{...u,ref:n})})}),L="ToggleGroupItem",be=h.forwardRef((e,n)=>{const t=ve(L,e.__scopeToggleGroup),r=ya(L,e.__scopeToggleGroup),s=he(e.__scopeToggleGroup),o=t.value.includes(e.value),l=r.disabled||e.disabled,i={...e,pressed:o,disabled:l},c=h.useRef(null);return r.rovingFocus?a.jsx(Ee,{asChild:!0,...s,focusable:!l,active:o,ref:c,children:a.jsx(Y,{...i,ref:n})}):a.jsx(Y,{...i,ref:n})});be.displayName=L;var Y=h.forwardRef((e,n)=>{const{__scopeToggleGroup:t,value:r,...s}=e,o=ve(L,t),l={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},i=o.type==="single"?l:void 0;return a.jsx(ge,{...i,...s,ref:n,onPressedChange:c=>{c?o.onItemActivate(r):o.onItemDeactivate(r)}})}),Na=H,La=be;const _a=Fe("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),je=d.createContext({size:"default",variant:"default"});function Ma({className:e,variant:n,size:t,children:r,...s}){return a.jsx(Na,{"data-slot":"toggle-group","data-variant":n,"data-size":t,className:b("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...s,children:a.jsx(je.Provider,{value:{variant:n,size:t},children:r})})}function W({className:e,children:n,variant:t,size:r,...s}){const o=d.useContext(je);return a.jsx(La,{"data-slot":"toggle-group-item","data-variant":o.variant||t,"data-size":o.size||r,className:b(_a({variant:o.variant||t,size:o.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l cursor-pointer",e),...s,children:n})}const Da=()=>{var i;const{chatId:e}=oe(),{dataSource:n,setDataSource:t}=D(),{data:r}=S(),{mutate:s}=Oe(),o=c=>{c&&(e&&s({chatId:e,dataSource:c}),t(c))},l=e&&((i=r==null?void 0:r.find(c=>c.id===e))==null?void 0:i.data_source)||n;return a.jsxs(Ma,{type:"single",value:l,onValueChange:o,className:"bg-muted rounded-md p-1 shadow-sm",children:[a.jsx(W,{value:q.DATABASE,className:"text-sm",children:a.jsx("div",{className:"m-2",children:"Database"})}),a.jsx(W,{value:q.FILE,className:"text-sm",children:a.jsx("div",{className:"m-2",children:"Registry / File"})})]})},X=d.lazy(()=>se(()=>import("./ResponseMessage-3bTSIUqn.js"),__vite__mapDeps([3,1,2,4,5]),import.meta.url).then(e=>({default:e.ResponseMessage}))),_=()=>a.jsx("div",{className:"p-4 text-sm",children:"Loading component..."}),Sa=({message:e,messages:n,chatId:t,index:r})=>{var o;const s=(o=n[r+1])==null?void 0:o.id;return a.jsx("div",{className:"table table-fixed w-full",children:e.role==="user"?a.jsxs(a.Fragment,{children:[a.jsx(ha,{id:e.id,responseId:s,message:e.content,timestamp:e.created_at,chatId:t}),e.in_progress&&a.jsx(d.Suspense,{fallback:a.jsx(_,{}),children:a.jsx(X,{message:e,isLoading:!0,chatId:t})})]}):a.jsx(d.Suspense,{fallback:a.jsx(_,{}),children:a.jsx(X,{message:e,isLoading:!1,chatId:t})})})},Ra=()=>{const{chatId:e}=oe(),n=Q(),{data:t=[],status:r}=ze({chatId:e}),{data:s}=S(),{mutate:o}=He(),l=!(t!=null&&t.some(u=>u.in_progress)),i=s?s.find(u=>u.id===e):void 0,c=()=>{if(i!=null&&i.id){const u=(s==null?void 0:s.filter(p=>p.id!==i.id))||[];if(o({chatId:i.id}),u.length>0){const p=[...u].sort((v,w)=>{const P=v.created_at?new Date(v.created_at).getTime():0;return(w.created_at?new Date(w.created_at).getTime():0)-P});n(`/chats/${p[0].id}`)}else n(ee.CHATS)}},g=()=>!t||t.length===0?a.jsx(d.Suspense,{fallback:a.jsx(_,{}),children:a.jsx(da,{chatId:i==null?void 0:i.id})}):a.jsxs(a.Fragment,{children:[a.jsx(Ue,{className:"flex flex-1 flex-col overflow-y-hidden pr-2 pb-4",children:t==null?void 0:t.map((u,p,v)=>a.jsx(Sa,{message:u,messages:v,chatId:i==null?void 0:i.id,index:p},p))}),a.jsx(d.Suspense,{fallback:a.jsx(_,{}),children:a.jsx(ma,{chatId:i==null?void 0:i.id,allowSend:l})})]}),f=()=>i?a.jsxs(a.Fragment,{children:[a.jsxs("h2",{className:"text-xl flex-1",children:[a.jsx("strong",{children:i.name||"New Chat"}),a.jsx(ba,{chatId:i.id,currentName:i.name})]}),a.jsx("div",{children:a.jsx(Da,{})}),a.jsxs(y,{variant:"ghost",onClick:c,children:[a.jsx(x,{icon:ie.faTrash}),a.jsx("span",{className:"ml-2",children:"Delete chat"})]})]}):null;return a.jsxs("div",{className:"p-6 h-full flex flex-col",children:[a.jsx("div",{className:"flex justify-between items-center gap-2 h-9",children:f()}),a.jsx(Ze,{className:"my-4 border-t"}),r==="pending"&&!(t!=null&&t.length)?a.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-200px)]",children:a.jsx(qe,{})}):g()]})},Oa=Object.freeze(Object.defineProperty({__proto__:null,Chats:Ra},Symbol.toStringTag,{value:"Module"}));export{ia as C,Ia as D,Ea as M,Aa as P,pa as a,ua as b,Oa as c,fe as f,Ga as p};
